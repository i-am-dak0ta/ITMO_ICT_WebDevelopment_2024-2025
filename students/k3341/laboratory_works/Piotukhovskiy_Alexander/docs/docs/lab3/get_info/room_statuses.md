# Статусы номеров

### Описание

Этот эндпоинт возвращает список номеров гостиницы, отфильтрованных по указанным статусам.

---

### URL

`GET /rooms`

---

### Параметры запроса

Эндпоинт принимает параметры в строке запроса (`query parameters`).

| Параметр  | Тип данных | Обязательный | Описание                                                                 |
|-----------|------------|--------------|--------------------------------------------------------------------------|
| `status`  | `string`   | Да           | Список статусов через запятую. Допустимые значения: `AVAILABLE`, `OCCUPIED`, `REQUIRES_CLEANING`, `CLEANING_IN_PROGRESS`, `MAINTENANCE`. |

---

### Пример запроса

```http
GET /rooms?status=AVAILABLE,OCCUPIED
```

---

### Успешный ответ (200)

```json
{
    "count": 3,
    "rooms": [
        {
            "number": 101,
            "type_id": 1,
            "type_name": "Одноместный",
            "phone": "1234567890",
            "current_client": {
                "id": 1,
                "passport_number": "1234567890",
                "first_name": "Иван",
                "last_name": "Иванов",
                "middle_name": "Сергеевич",
                "city_from": "Москва"
            }
        },
        {
            "number": 102,
            "type_id": 1,
            "type_name": "Одноместный",
            "phone": "1234567891",
            "current_client": null
        },
        {
            "number": 201,
            "type_id": 2,
            "type_name": "Двухместный",
            "phone": "1234567892",
            "current_client": null
        }
    ]
}
```

#### Поля ответа

| Поле                                   | Тип данных    | Описание                                            |
|----------------------------------------|---------------|-----------------------------------------------------|
| `count`                                | `integer`     | Общее количество найденных номеров.                 |
| `rooms`                                | `array`       | Список номеров, соответствующих указанным статусам. |
| `rooms.number`                         | `integer`     | Номер комнаты.                                      |
| `rooms.type_id`                        | `integer`     | ID типа комнаты.                                    |
| `rooms.type_name`                      | `string`      | Название типа комнаты (например, "Одноместный").    |
| `rooms.phone`                          | `string`      | Телефонный номер, закрепленный за комнатой.         |
| `rooms.current_client`                 | `object/null` | Данные о клиенте, проживающим в номере.             |
| `rooms.current_client.id`              | `integer`     | ID клиента.                                         |
| `rooms.current_client.passport_number` | `string`      | Номер паспорта клиента.                             |
| `rooms.current_client.first_name`      | `string`      | Имя клиента.                                        |
| `rooms.current_client.last_name`       | `string`      | Фамилия клиента.                                    |
| `rooms.current_client.middle_name`     | `string/null` | Отчество клиента, если указано.                     |
| `rooms.current_client.city_from`       | `string`      | Город, из которого прибыл клиент.                   |

---

### Ошибки

#### Неверный запрос (422)

Пример ответа:

```json
{
    "detail": "Параметр 'status' обязателен для этого запроса."
}
```

| Код   | Описание                                                         |
|-------|-----------------------------------------------------------------|
| 422   | Отсутствие обязательного параметра или недопустимые значения статусов. |

#### Недопустимые статусы (422)

Пример ответа:

```json
{
    "detail": "Недопустимые статусы: ['INVALID_STATUS']. Доступные статусы: ['AVAILABLE', 'OCCUPIED', 'REQUIRES_CLEANING', 'CLEANING_IN_PROGRESS', 'MAINTENANCE']."
}
```

---

### Примечания

- Параметр `status` обязателен. Если он не указан, запрос будет отклонен.
- Укажите один или несколько статусов через запятую. Например, `AVAILABLE,OCCUPIED`.
- Если указаны недопустимые статусы, запрос завершится ошибкой с описанием доступных значений.
- Если ни один номер не соответствует фильтру, будет возвращен пустой список с полем `count: 0`.