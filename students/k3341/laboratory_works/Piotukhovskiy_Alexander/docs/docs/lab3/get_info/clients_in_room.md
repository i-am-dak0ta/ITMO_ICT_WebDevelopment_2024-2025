# Клиенты, проживавшие в номере

### Описание

Этот эндпоинт возвращает список клиентов, проживавших в указанном номере в заданный период времени. Также можно отфильтровать клиентов по городу их проживания.

---

### URL

`GET /clients`

---

### Параметры запроса

Эндпоинт принимает параметры в строке запроса (`query parameters`).

| Параметр     | Тип данных | Обязательный | Описание                                                      |
|--------------|------------|--------------|--------------------------------------------------------------|
| `room`       | `integer`  | Да           | Номер комнаты для фильтрации.                                |
| `start_date` | `string`   | Нет          | Дата начала периода (формат `YYYY-MM-DD`).                   |
| `end_date`   | `string`   | Нет          | Дата окончания периода (формат `YYYY-MM-DD`).                |
| `city`       | `string`   | Нет          | Город проживания клиентов для дополнительной фильтрации.     |

---

### Пример запроса

```http
GET /clients?room=101&start_date=2024-01-01&end_date=2024-01-15&city=Москва
```

---

### Успешный ответ (200)

```json
{
    "count": 2,
    "clients": [
        {
            "id": 1,
            "passport_number": "1234567890",
            "first_name": "Иван",
            "last_name": "Иванов",
            "middle_name": "Сергеевич",
            "city_from": "Москва"
        },
        {
            "id": 2,
            "passport_number": "0987654321",
            "first_name": "Анна",
            "last_name": "Смирнова",
            "middle_name": null,
            "city_from": "Москва"
        }
    ]
}
```

#### Поля ответа

| Поле            | Тип данных    | Описание                                           |
|------------------|---------------|---------------------------------------------------|
| `count`          | `integer`     | Общее количество найденных клиентов.             |
| `clients`        | `array`       | Список клиентов, соответствующих критериям.       |
| `clients.id`     | `integer`     | ID клиента.                                       |
| `clients.passport_number` | `string` | Номер паспорта клиента.                          |
| `clients.first_name`       | `string` | Имя клиента.                                     |
| `clients.last_name`        | `string` | Фамилия клиента.                                 |
| `clients.middle_name`      | `string/null` | Отчество клиента, если указано.                 |
| `clients.city_from`        | `string` | Город, из которого прибыл клиент.               |

---

### Ошибки

#### Неверный запрос (422)

Пример ответа:

```json
{
    "detail": "Параметр 'room' обязателен для этого запроса."
}
```

| Код   | Описание                                                         |
|-------|-----------------------------------------------------------------|
| 422   | Отсутствие обязательного параметра или некорректный формат даты. |

#### Комната не найдена (404)

Пример ответа:

```json
{
    "detail": "Комната с номером 101 не найдена."
}
```

#### Клиенты не найдены (404)

Пример ответа:

```json
{
    "detail": "Не найдено ни одного клиента по заданным фильтрам."
}
```

---

### Примечания

- Параметры `start_date` и `end_date` не обязательны, но если они указаны, они определяют период проживания.
- Если `start_date` больше `end_date`, запрос будет отклонен.
- Фильтрация по городу (`city`) выполняется по точному совпадению названия города.
- Если ни одного клиента не найдено, возвращается пустой список с кодом ответа `404`.