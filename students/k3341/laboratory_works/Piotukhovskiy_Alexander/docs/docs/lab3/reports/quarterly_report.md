# Квартальный отчет

### Описание

Этот эндпоинт предоставляет информацию о работе гостиницы за указанный квартал и год. В отчёт включены данные о количестве клиентов в каждом номере, количестве номеров на каждом этаже, доходах по каждому номеру и общем доходе гостиницы.

---

### URL

`GET /reports/quarterly`

---

### Параметры запроса

| Параметр     | Тип данных | Обязательный | Описание                                                      |
|--------------|------------|--------------|--------------------------------------------------------------|
| `quarter`    | `integer`  | Да           | Номер квартала (1, 2, 3 или 4).                              |
| `year`       | `integer`  | Да           | Год для отчета (не может быть больше текущего года).         |

---

### Пример запроса

```http
GET /reports/quarterly?quarter=1&year=2024
```

---

### Успешный ответ (200)

Пример ответа:

```json
{
    "clients_per_room": [
        {"room__number": 101, "client_count": 5},
        {"room__number": 102, "client_count": 3}
    ],
    "rooms_per_floor": [
        {"floor": 1, "room_count": 10},
        {"floor": 2, "room_count": 8}
    ],
    "income_per_room": [
        {"room__number": 101, "total_income": 15000},
        {"room__number": 102, "total_income": 12000}
    ],
    "total_income": 27000,
    "start_date": "2024-01-01",
    "end_date": "2024-03-31"
}
```

#### Поля ответа

| Поле              | Тип данных      | Описание                                                                 |
|-------------------|-----------------|--------------------------------------------------------------------------|
| `clients_per_room`| `array`         | Список номеров с количеством клиентов, проживавших в каждом из них.      |
| `rooms_per_floor` | `array`         | Количество номеров на каждом этаже гостиницы.                            |
| `income_per_room` | `array`         | Доход по каждому номеру за указанный период.                             |
| `total_income`    | `integer`       | Общий доход гостиницы за указанный период.                               |
| `start_date`      | `string` (дата) | Начальная дата отчетного периода.                                        |
| `end_date`        | `string` (дата) | Конечная дата отчетного периода.                                         |

---

### Ошибки

#### Неверный запрос (422)

Пример ответа:

```json
{
    "detail": "Год не может быть в будущем."
}
```

| Код   | Описание                                                           |
|-------|-------------------------------------------------------------------|
| 422   | Некорректные данные. Например, указан неверный год или квартал.   |

---

### Примечания

- **Параметр `quarter`** определяет квартал: 
  - 1 — Январь-Март
  - 2 — Апрель-Июнь
  - 3 — Июль-Сентябрь
  - 4 — Октябрь-Декабрь
- **Параметр `year`** должен быть текущим или прошлым годом.
- Если за указанный период не найдено данных, ответ будет пустым, но с кодом `200`.
