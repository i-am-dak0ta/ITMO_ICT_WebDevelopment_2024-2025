# Обновить расписание уборок

### Описание

Этот эндпоинт позволяет обновить расписание уборок для указанного сотрудника. Можно указать комнаты и даты, на которые устанавливается новое расписание.

---

### URL

`PATCH /cleaning-schedules/manage`

---

### Параметры запроса

Запрос принимает JSON-объект в теле запроса.

| Параметр          | Тип данных    | Обязательный | Описание                                                                 |
|--------------------|---------------|--------------|--------------------------------------------------------------------------|
| `cleaner_id`       | `integer`     | Да           | ID сотрудника (уборщика), для которого обновляется расписание.            |
| `cleaning_dates`   | `array`       | Да           | Список дат уборки в формате `YYYY-MM-DD`.                                 |
| `room_ids`         | `array`       | Да           | Список ID комнат, которые сотрудник будет убирать.                        |

---

### Пример запроса

```http
PATCH /cleaning-schedules/manage
Content-Type: application/json

{
    "cleaner_id": 5,
    "cleaning_dates": ["2024-12-10", "2024-12-12", "2024-12-15"],
    "room_ids": [101, 102, 103]
}
```

---

### Успешный ответ (200)

```json
{
    "detail": "Расписание успешно обновлено."
}
```

---

### Ошибки

#### Ошибки валидации данных (422)

Пример ответа:

```json
{
    "detail": "Указанный служащий не найден или не имеет активного контракта.",
    "missing_rooms": "Следующие номера комнат не найдены: 101, 102."
}
```

| Код   | Описание                                                         |
|-------|-----------------------------------------------------------------|
| 422   | Ошибки валидации данных. Например, указаны несуществующие комнаты или отсутствующий сотрудник. |

#### Сотрудник не найден (404)

Пример ответа:

```json
{
    "detail": "Сотрудник с указанным ID не найден."
}
```

---

### Примечания

- Все текущие записи в расписании уборок для указанного сотрудника, связанные с указанными комнатами и датами, будут удалены перед добавлением новых записей.
- Указанные комнаты должны существовать в системе. Если одна или несколько комнат не найдены, запрос завершится с ошибкой.
- Указанный сотрудник должен иметь активный трудовой договор. Если трудовой договор не найден, будет возвращена ошибка.